/******************************************
/ fichier de configuration de comm_lenz
/ gily - f1iwq - 2018
/******************************************
/ ce programme permet de commander les signaux complexes avec ou sans
/ CDM rail. Avec CDM rail, ce programme doit être connecté au réseau par l'interface
/ ethernet (nécessite l'interface LI100 ETH) ; CDM est connecté par USB, et dans ce cas,
/ mettre 0 dans le numéro de port COM (inutilisé) ainsi que la variable avec ou sans initialisation
/ des aiguillages à 0.
/
/ Adresse IP V4 de l'interface LI-USB Ethernet : port
/ ne pas connecter le port ou mettre 0 si on travaille avec l'interface USB
192.168.1.23:5550
/
/ port COM de l'adresse USB de l'interface LI100
/ attention de 1 à 9 - Si le port de l'interface USB LI100 >9, il faut le changer
/ manuellement dans le gestionnaire des périphériques
/ mettre 0 si inutilisée ou si CDM est utilisé en parallèle de ce programme (car CDM utilise la liaison USB)
/4
4
/
/ dernière adresse d'aiguillages du réseau. Si 0, 80 sera utilisé.
32
/ Avec (1) ou sans (0) initialisation des aiguillages au démarrage selon le tableau ci après
1
/ Valeurs des initialisations des aiguillages au démarrage -----------------------------------------------
/ @ aiguillage, position 1=dévié 2=droit, temporisation de manoeuvre en 1/10eme de seconde ,
/ 0=pilotage normal 1=pilotage inversé
/ une position différente de 1 ou 2 sera à 1. Une temporisation de 0 sera à 5.
/ la liste doit être terminée par 0,0,0
1,2,3,0
2,2,3,0
3,2,3,0
4,1,3,0
5,1,3,0
6,1,3,0
7,1,3,0
8,2,3,0
9,2,3,0
10,2,3,0
11,2,3,0
12,1,3,0
13,1,3,0
14,1,3,0
15,1,3,0
16,1,4,0
17,1,3,0
18,2,4,0
19,1,4,0
20,2,4,0
21,2,3,0
22,2,3,0
23,1,3,0
24,1,3,0
25,1,3,0
26,2,3,0
27,2,3,0
28,2,3,0
29,2,3,0
30,2,3,0
31,1,3,0
32,1,3,0
0,0,0,0
/
/ liste des adresses des signaux et leur forme, pour affichage de l'image correspondante ,
/ avec ou sans bouton de commande pour le feu blanc, type de décodeur.
/ la liste doit être terminée par une adresse à 0
/ adresse de base du signal, forme, avec ou sans bouton de commande du feu blanc, type de décodeur
/ forme : 2=2 feux(carré violet/blanc) / 3=3 feux / 4=4 feux / 5=5 feux (carré + blanc ou violet)
/         7=7 feux (blanc ou violet + ralentissement  / 9=9 feux (blanc ou violet + rappel ralentissement)
/ type de décodeur : 1=digital Bahn 2=CDF 3=LDT
/
176,7,0,1
190,7,0,1
204,9,0,1
218,7,0,1
232,2,1,1
260,9,1,1
274,3,0,1
288,7,0,1
302,9,0,1
316,7,1,1
330,7,0,1
344,9,0,1
358,9,0,1
392,3,0,1
420,7,0,1
448,7,0,1
462,9,0,1
476,9,0,1
600,7,0,1
0,0
/
/ modélisation des aiguillages : détermine les éléments connectés aux 3 branches des aiguilles (Pointe, Droit, Dévié (S)
/ adresse d'aiguillage,P=élément vers pointe D=élément vers Droit, S=élément vers dévié.
/ Elément = détecteur (valeur uniquement numérique) ou aiguillage (adresse+branche de connexion (P S ou D)
/ Exemple : 1,P518,D523,S3P signifie : définition de l'aiguillage @1 : sur pointe relié au détecteur 518
/                                      sur Droit relié au détecteur 518
/                                      sur Dévié, relié à l'aiguillage 3 en pointe
/ Pour une TJD : 26TJD,D[28S,529],S[28D,530]
/ D[ ] : éléments connectés à la TJD en position D (droite), le 1er est l'adresse de la 2eme TJD et sa position
/ S[ ] : éléments connectés à la TJD en position S (déviée) , le 2eme est l'élément extérieur à la TJD
/
/ S'il n'y a pas de détecteur connecté à une branche d'aiguillage, mettre 0.
1,P518,D523,S3P
2,P12S,S5S,D519
3,P1S,S5D,D4P
4,P3D,S514,D6S
5,P515,S2S,D3S
6,P516,S4D,D0
7,P527,S520,D519
8,P527,S522,D521
9,P526,S515,D513
10,P19P,S528,D29P
11,P18P,D30D,S525
12,P517,D20S,S2P
17,P525,D535,S528
18,P11P,S517,D23P
19,P10P,S518,D22P
20,P520,D21P,S12D
21,P20D,S28D,D28D
22,P19D,S538,D537
23,P18D,S534,D538
24,P538,S533,D32S
25,P31S,D529,S27P
26TJD,D[28S,529],S[28D,530]
27,P25S,D530,S537
28TJD,D[26S,21S],S[26D,21D]
29,P10D,S30S,D513
30,P524,S29D,D11D
31,P534,S25P,D0
32,P22S,S24D,D0
0
//
/ modélisation du réseau par branche
/ 1 ligne par branche - le sens de parcours de la branche est arbitraire.
/ Chaque ligne (branche) doit commmencer et finir par un détecteur
/ @ détecteur A=@aiguillage
/ Terminer par 0
/ Exemple : 519 est un détecteur  - A2 est l'aiguillage 2
/
519,A2,A12,517,A18,A11,A30,524,521,A8,527,A7,519
527,A7,520,A20,A12,517
518,A1,A3,A4,514,522,A8,527
523,526,A9,513,A29,A10,A19,518,A1,523
526,A9,515,A5,A2,A12,517
517,A18,A11,525,A17,528,A10,A19,518
525,A17,535,533,A24,538,A23,A18,A11,A30,524
520,A20,A21,A28,A26,530,A27,A25,A31,534,A23,A18,A11,A30,524
520,A20,A21,A28,A26,529,A25,A31,534,A23,A18,A11,A30,524
513,A29,A10,A19,A22,537,A27,A25,A31,534
513,A29,A10,A19,A22,A32,A24,538
0





